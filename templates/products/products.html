{% extends "base.html" %}
{% block title %}Produtos{% endblock %}

{% block content %}
<h1>Produtos</h1>
<div class="hr"></div>

<div>
    <button class="btn-green" onclick="window.location.href=`{{ url_for('products.new_product') }}`">Novo
        produto</button>
</div>

<div class="c-center">
    <table id="product-table">
        <thead>
            <tr>
                <th>Id</th>
                <th>Nome</th>
                <th>Descrição</th>
                <th>Quantidade</th>
                <th>Preço</th>
                <th>Categoria</th>
                <!-- <th>Criado em</th>
                <th>Atualizado em</th> -->
                <th>Ações</th>
            </tr>

        </thead>
        <tbody>
            {% for prod in products %}
            <tr class="product-row" data-id="{{ prod.id }}">
                <th>#{{ prod.id }}</th>
                <td>{{ prod.name }}</td>
                <td>{{ prod.description }}</td>
                <td>{{ prod.quantity }}</td>
                <td>R${{ prod.price }}</td>
                <td>{{ prod.category }}</td>
                <!-- <td>{{ prod.created_at }}</td>
                <td>{{ prod.updated_at if prod.updated_at else "-" }}</td> -->
                <td>
                    <button
                        onclick="event.stopPropagation();window.location.href=`{{ url_for('update_category', category_id=prod.id) }}`"
                        id="update-category-btn" class="btn-blue">Editar</button>
                    <button onclick="event.stopPropagation();" data-id="{{ prod.id }}" id="delete-category-btn"
                        class="btn-red">Apagar</button>
                </td>
            </tr>
            {% endfor %}

        </tbody>
    </table>
    <script src="{{ url_for('static', filename='js/products.js') }}" defer></script>
</div>

<div id="modal-container" class="modal-overlay">
    <div class="modal-content">
        <h4>Id: <span id="product-id"></span></h4>
        <h4>Nome: <span id="product-name"></span></h4>
        <p>Descrição: <span id="product-description"></span></p>
        <p>Qte.: <span id="product-quantity"></span></p>
        <p>Preço: <span id="product-price"></span></p>
        <p>Categoria: <span id="product-category"></span></p>
        <div style="text-align: center;">
            <button id="close-modal" class="btn-blue" type="button">Ok</button>
        </div>
    </div>
</div>

{% endblock %}